# Service Accounts with Azure Workload Identity
# Requires: AKS workload identity enabled, managed identities configured
apiVersion: v1
kind: ServiceAccount
metadata:
  name: churn-api-sa
  namespace: telco-churn
  labels:
    app: churn-api
    app.kubernetes.io/part-of: telco-churn
    azure.workload.identity/use: "true"
  annotations:
    # Set to managed identity client ID after terraform apply
    azure.workload.identity/client-id: "MANAGED_IDENTITY_CLIENT_ID_PLACEHOLDER"

---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: churn-dashboard-sa
  namespace: telco-churn
  labels:
    app: churn-dashboard
    app.kubernetes.io/part-of: telco-churn
    azure.workload.identity/use: "true"
  annotations:
    azure.workload.identity/client-id: "MANAGED_IDENTITY_CLIENT_ID_PLACEHOLDER"
